#Pre-exam #BaseServer

```PostgreSQL
Table: employees
-----------------------------------
| employee_id | name   | department |
-----------------------------------
| 1           | Alice  | HR         |
| 2           | Bob    | Engineering|
| 3           | Charlie| Marketing  |
-----------------------------------

Table: projects
--------------------------------------------------------------
| project_id | name          | start_date | end_date | manager_id|
--------------------------------------------------------------
| 101        | Project X     | 2024-01-01 | 2024-06-30| 1       |
| 102        | Project Y     | 2024-02-15 | 2024-08-31| 2       |
| 103        | Project Z     | 2024-03-10 | 2024-09-15| 1       |
--------------------------------------------------------------

Table: tasks
----------------------------------------
| task_id | project_id | description   |
----------------------------------------
| 501     | 101        | Task A        |
| 502     | 101        | Task B        |
| 503     | 102        | Task C        |
| 504     | 103        | Task D        |
| 505     | 103        | Task E        |
----------------------------------------
```

// 1. Вывести имена всех сотрудников и их отделы, отсортированных по отделам в алфавитном порядке.
// 2. Вывести все проекты, у которых дата окончания больше текущей даты.
// 3. Обновить дату окончания проекта с project_id = 15 на 2025-12-31.
// 4. Удалить всех сотрудников из отдела HR.
// 5. Вывести имена всех сотрудников, названия проектов на которых они работают, и список задач, связанных с каждым проектом.
// 6. Обновить дату окончания всех проектов, на которых работает сотрудник с именем 'Alice', на 2025-01-01.

---

1. **Вывести имена всех сотрудников и их отделы, отсортированных по отделам в алфавитном порядке.**

```PostgreSQL
SELECT name, department 
FROM employees 
ORDER BY department
```

2. **Вывести все проекты, у которых дата окончания больше текущей даты.**
```PostgreSQL
SELECT * 
FROM projects 
WHERE 
	end_date > CURRENT_DATE
```

3. **Обновить дату окончания проекта с project_id = 15 на 2025-12-31.**
```PostgreSQL
UPDATE projects 
SET 
	end_date = '2025-12-31' 
WHERE 
	project_id = 15
```

4. **Удалить всех сотрудников из отдела 'HR'.**
```PostgreSQL
DELETE FROM employees 
WHERE 
	department = 'HR'
```

5. **Вывести имена всех сотрудников, названия проектов на которых они работают, и список задач, связанных с каждым проектом.**
```PostgreSQL
SELECT  e.name AS employee_name, 
		p.name AS project_name, 
		t.description AS task_description 
FROM employees AS e 
JOIN projects p ON e.employee_id = p.manager_id 
JOIN tasks t ON p.project_id = t.project_id
```

6. **Обновить дату окончания всех проектов, на которых работает сотрудник с именем 'Alice', на 2025-01-01.**

```PostgreSQL
UPDATE projects 
	SET end_date = '2025-01-01' 
	WHERE 
		manager_id = (SELECT employee_id 
						FROM employees 
						WHERE 
							name = 'Alice')
```

#### Создание таблицы в БД
// Создать таблицу TodoItems, в которой будут следующие поля:
// createdAt - Данное поле должно устанавливать значением по умолчанию текущее время (с учетом часового пояса).
// id        - Должен генерироваться автоматически. Так же должен удовлетворять условию первичного ключа.
// status    - По умолчанию поле должно иметь значение false.
// text      - Строка неограниченной длинны.