#Pre-exam #BaseServer

```PostgreSQL
Table: customers
--------------------------------
| customer_id | name   | city   |
--------------------------------
| 1           | Anna   | Moscow |
| 2           | Bob    | London |
| 3           | Charlie| Berlin |
| 4           | David  | Madrid |
| 5           | Emily  | Rome   |
| ...         | ...    | ...    |
--------------------------------
  
Table: orders
----------------------------------
| order_id | customer_id | amount |
----------------------------------
| 101      | 1           | 200    |
| 102      | 2           | 300    |
| 103      | 1           | 150    |
| 104      | 3           | 400    |
| 105      | 4           | 250    |
| ...      | ...         | ...    |
----------------------------------
  
Table: products
-----------------------------
| product_id | name  | price |
-----------------------------
| 501        | Apple | 2.5   |
| 502        | Banana| 1.8   |
| 503        | Orange| 3.0   |
| 504        | Mango | 4.2   |
| 505        | Grape | 2.7   |
| ...        | ...   | ...   |
-----------------------------

// 1. Вывести список всех клиентов и их городов, отсортированных по городам в алфавитном порядке.
// 2. Удалить всех клиентов из города Moscow.
// 3. Вывести все заказы с суммой больше 200.
// 4. Обновить сумму заказа с order_id = 101 на 250.
// 5. Вывести имена всех заказчиков, которые сделали заказы на продукты, стоимость которых превышает 3 единицы.
// 6. Обновить статус заказа на "Завершен", если он был сделан заказчиком с именем 'Peter'.
================================================================================

```

// 1. Вывести список всех клиентов и их городов, отсортированных по городам в алфавитном порядке.
```PostgreSQL
SELECT name, city
FROM customers
ORDER BY city;
```

// 2. Удалить всех клиентов из города Moscow.
```PostgreSQL
DELETE FROM customers
WHERE city = 'Moscow';
```

// 3. Вывести все заказы с суммой больше 200.
```PostgreSQL
SELECT *
FROM orders
WHERE amount > 200;
```

// 4. Обновить сумму заказа с order_id = 101 на 250.
```PostgreSQL
UPDATE orders
SET amount = 250
WHERE order_id = 101;

```

// 5. Вывести имена всех заказчиков, которые сделали заказы на продукты, стоимость которых превышает 3 единицы.
```PostgreSQL
SELECT DISTINCT c.name
FROM customers AS c
JOIN orders o ON c.customer_id = o.customer_id
JOIN products p ON o.amount > 3 * p.price;
```

// 6. Обновить статус заказа на "Завершен", если он был сделан заказчиком с именем 'Peter'.
```PostgreSQL
UPDATE orders
SET 
	status = 'Completed'
WHERE 
	customer_id = (SELECT customer_id 
					 FROM customers 
					 WHERE 
						 name = 'Peter');
```

#### Создание таблицы в БД
// Создать таблицу TodoItems, в которой будут следующие поля:
// createdAt - Данное поле должно устанавливать значением по умолчанию текущее время (с учетом часового пояса).
// id        - Должен генерироваться автоматически. Так же должен удовлетворять условию первичного ключа.
// status    - По умолчанию поле должно иметь значение false.
// text      - Строка неограниченной длинны.