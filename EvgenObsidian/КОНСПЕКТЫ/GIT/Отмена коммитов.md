### Отмена коммита путем создания нового коммита

Отменим коммит путем создания нового коммита, отменяющего нежелательные изменения. Чтобы отменить коммит, необходимо сделать коммит, который удаляет изменения, сохраненные нежелательным коммитом.

```Sh
git revert --no-edit HEAD
```

Далее делаем новый коммит.
```Sh
git add .
git commit -m "Removed bad commit"
```

Так как мы отменили самый последний произведенный коммит, мы смогли использовать метку `HEAD` в качестве аргумента для отмены коммита. Мы можем отменить любой произвольной коммит в истории, указав его хеш. 

> Эта техника будет работать с любым коммитом (хотя, возможно, возникнут конфликты). Она безопасна в использовании даже в публичных ветках удаленных репозиториев.

### Удаление коммитов из ветки

Команда `revert` из предыдущего раздела является мощной командой, которая позволяет отменить любые коммиты в репозиторий. Однако, и оригинальный и «отмененный» коммиты видны в истории ветки (при использовании команды `git log`).

Часто мы делаем коммит, и сразу понимаем, что это была ошибка. Было бы неплохо иметь команду «возврата», которая позволила бы нам сделать вид, что неправильного коммита никогда и не было. Команда «возврата» даже предотвратила бы появление нежелательного коммита в истории `git log`.

Можно выполнить команду `reset` с указанием ссылки на коммит (т.е. метки `HEAD`, имени ветки или тега, хеша коммита), то команда...

1. Изменит текущую ветку, чтобы она указывала на указанный коммит.
2. Опционально сбросит область подготовки до соответствия с указанным коммитом.
3. Опционально сбросит рабочую директорию до соответствия с указанным коммитом.

Чтобы откатиться к нужному коммиту, используем команду:
```Sh
git reset --hard v1
```
Возможные ключи к команде `reset`:
- **`--soft`:** При использовании этого ключевого слова HEAD переустанавливается на указанный коммит, но изменения в вашем рабочем каталоге и индексе не удаляются. Вместо этого изменения остаются в индексе для последующего коммита.
- 
- **`--mixed` (по умолчанию):** Это ключевое слово переустанавливает HEAD на указанный коммит и сбрасывает индекс к состоянию этого коммита, но не меняет состояние вашего рабочего каталога. Ваши изменения сохраняются, но они не зафиксированы в индексе, что позволяет вам пересмотреть их и выбрать, какие изменения включить в следующий коммит.

- **`--merge`:** Это ключевое слово может использоваться, чтобы отменить конфликтующий слияние. Оно сохраняет рабочий каталог и индекс в текущем состоянии, а HEAD сбрасывается на указанный коммит.
 
- **`--keep`:** Это ключевое слово позволяет сохранить изменения, которые не конфликтуют с указанным коммитом, в рабочем каталоге и индексе. Если изменения конфликтуют, они игнорируются.

Наша ветка теперь указывает на коммит `v1`, а ошибочных коммитов больше нет . Параметр `--hard` указывает, что рабочая директория должна быть приведена к тому состоянию, которое соответствует `HEAD`-коммиту ветки. Удаленные коммиты все еще находятся в репозитории. Увидеть их можно с помощью команды:
```Sh
git log --all
```

> Данный способ не безопасен для работы с удаленными репозиториями.

