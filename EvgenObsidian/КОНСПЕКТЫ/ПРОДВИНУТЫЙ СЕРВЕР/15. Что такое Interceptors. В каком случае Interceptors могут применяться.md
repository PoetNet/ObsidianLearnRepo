
Interceptors - это паттерн проектирования, который позволяет перехватывать и обрабатывать вызовы к объекту или методу до и после их выполнения. В контексте разработки программного обеспечения, Interceptors часто используются для добавления дополнительной логики или функциональности в уже существующий код без изменения самого кода.

Interceptors могут применяться в различных случаях:

1. **Логирование:** Использование Interceptors для записи логов о вызовах методов, передаваемых параметрах и возвращаемых значениях. Это позволяет отслеживать работу программы и выявлять проблемы.

2. **Кэширование:** Interceptors могут использоваться для добавления кэширования результатов вызовов методов. Например, если результат вызова метода не меняется с течением времени, его можно сохранить в кэше, чтобы избежать повторных вычислений.

3. **Аутентификация и авторизация:** Interceptors могут быть использованы для проверки аутентификации и авторизации перед выполнением методов. Например, проверка прав доступа пользователя к определенному методу или ресурсу.

4. **Измерение производительности:** Interceptors могут быть использованы для измерения времени выполнения методов и определения узких мест в приложении.

5. **Транзакционная обработка:** Interceptors могут использоваться для управления транзакциями и обеспечения целостности данных при вызове методов.

6. **Обработка исключений:** Interceptors могут использоваться для перехвата и обработки исключений, возникающих при вызове методов.

В целом, Interceptors предоставляют гибкий механизм для добавления дополнительной логики или функциональности в уже существующий код. Они часто используются в различных фреймворках и библиотеках программирования, таких как Spring Framework в Java или ASP.NET Core в .NET.

#### Класс интерцептора:
```C#
public class LoggingInterceptor(IMyService myService) : ICalculatorService
{
    public int Foo()
    {
        // Logic
        var result = myService.DoWork();
        // Another logic
        return result;
    }
}
```

#### Регистрация интерцептора в сервисах:

```C#
services.AddScoped<ICalculatorService, LoggingInterceptor>();
```


## Различия между интерцепторами и фильтрами.

Перехватчики (Interceptors) и фильтры (Filters) - это два различных подхода к добавлению дополнительной логики или функциональности в приложение в ASP.NET Core.

Вот основные различия между ними:

1. **Момент применения:**
   - **Фильтры:** Применяются на уровне MVC pipeline и действуют непосредственно в процессе обработки запросов до или после выполнения действий контроллеров.
   - **Перехватчики:** Применяются на уровне объекта или метода и действуют на более низком уровне, перехватывая вызовы к объектам или методам до и после их выполнения.

2. **Уровень абстракции:**
   - **Фильтры:** Оперируют на уровне контроллеров и действий контроллеров. Они могут применяться к целым контроллерам или отдельным действиям и работают в контексте обработки HTTP запросов и формирования HTTP ответов.
   - **Перехватчики:** Оперируют на уровне объектов или методов и могут быть применены к любым объектам или методам в приложении. Они не связаны с MVC и могут использоваться для добавления логики в любой уровень вашего приложения.

3. **Цель использования:**
   - **Фильтры:** Используются для добавления логики, связанной с обработкой HTTP запросов и формированием HTTP ответов, такой как авторизация, логирование, обработка исключений и т. д.
   - **Перехватчики:** Используются для добавления логики внутри самого приложения, такой как кэширование, логирование, транзакционная обработка и т. д.

Оба подхода имеют свои сценарии использования и могут быть эффективно применены для решения различных задач. Выбор между ними зависит от конкретных требований вашего приложения и того, на каком уровне вы хотите добавить дополнительную логику или функциональность.