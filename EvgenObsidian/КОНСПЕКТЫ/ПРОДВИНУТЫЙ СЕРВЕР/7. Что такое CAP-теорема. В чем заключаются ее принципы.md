
CAP-теорема (теорема Брюера) - это эвристическое утверждение, которое описывает основные компромиссы при проектировании распределенных вычислительных систем. Теорема была сформулирована в 2000 году Эриком Брюером.

Согласно CAP-теореме, в распределенной системе невозможно одновременно обеспечить все три следующие гарантии:

1. **Согласованность (Consistency):** Все узлы системы видят одни и те же данные одновременно, независимо от того, к какому узлу они обращаются.

2. **Доступность (Availability):** Все запросы к системе будут завершены успешно, не зависимо от того, работают ли все узлы или же некоторые узлы недоступны.

3. **Устойчивость к разделению (Partition tolerance):** Система продолжает функционировать даже при разделении на несколько частей, когда некоторые узлы не могут связаться друг с другом.

Эти принципы CAP-теории подробно описывают, как распределенная система может реагировать на различные виды отказов и сбоев, и помогают архитекторам и разработчикам выбирать подходящие стратегии проектирования и реализации систем. Теорема утверждает, что система может обеспечить только две из трех гарантий одновременно. Выбор между этими гарантиями зависит от требований к системе и ее контекста использования.

### Примеры ситуаций, когда можно пожертвовать каждым из принципов CAP-теоремы в пользу других двух:

####     1. **Пожертвовать согласованность (Consistency):**
   - Социальные сети: В социальных сетях, таких как Twitter или Facebook, позволяется некоторая задержка в обновлении данных на разных серверах. Например, при публикации нового поста у пользователя может занять некоторое время, прежде чем он станет виден всем его подписчикам. Это позволяет обеспечить высокую доступность и устойчивость к разделению системы.
   - Кэширование: В системах кэширования данные могут быть устаревшими в некоторых кэшах из-за задержек в обновлении или инвалидации кэша. Это позволяет обеспечить более быстрый доступ к данным, улучшая доступность и производительность.

####     2. **Пожертвовать доступность (Availability):**
   - Финансовые транзакции: В финансовых системах недоступность системы может быть неприемлема, поэтому они могут выбирать согласованность и устойчивость к разделению в ущерб доступности. Это означает, что система может временно приостанавливать операции, пока не будет восстановлена полная доступность.
   - Реальное время: В системах реального времени (например, системы управления транспортом или медицинские устройства) критически важна точность данных и операций, поэтому они могут быть склонны пожертвовать доступностью в пользу согласованности.

####    3. **Пожертвовать устойчивостью к разделению (Partition tolerance):**
   - Локальные сети: Внутренние сети предприятий могут быть менее подвержены разделению, чем глобальные распределенные системы. В таких ситуациях можно выбирать согласованность и доступность в ущерб устойчивости к разделению.
   - Отказоустойчивость: В некоторых случаях, например, при развертывании критически важных систем, которые необходимо максимально защитить от отказов и сбоев, можно выбрать согласованность и доступность в ущерб устойчивости к разделению.